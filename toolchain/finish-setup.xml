<xml>

<set name="DBG" value="-debug" if="debug" unless="DEBUGSUFFIX" />
<set name="DBG" value="${DEBUGSUFFIX}" if="debug" unless="DBG" />

<set name="M64" value="64" if="HXCPP_M64"/>
<set name="M64" value="arm64" if="HXCPP_ARM64"/>
<set name="F32" value="-f32" if="HXCPP_FLOAT32"/>
<set name="NEEDS_NC" value="-nc" if="windows"/>
<set name="NOCONSOLE" value="${NEEDS_NC}" if="no_console"/>
<set name="RPI" value="-rpi" if="rpi"/>
<set name="APIFP" value="-hfp" if="hardfp"/>
<set name="CPPIA_NO_JIT" value="1" if="emscripten"/>

<set name="STD_MODULE_LINK" value="dll"/>

<set name="static_link" value="1" if="iphoneos" unless="dll_import||exe_link" />
<set name="static_link" value="1" if="iphonesim" unless="dll_import||exe_link" />
<set name="static_link" value="1" if="appletvos" unless="dll_import||exe_link" />
<set name="static_link" value="1" if="appletvsim" unless="dll_import||exe_link" />

<set name="LIBPREFIX" value="lib" if="static_link" unless="STATICLIBPREFIX" />
<set name="LIBPREFIX" value="${STATICLIBPREFIX}" if="static_link" unless="LIBPREFIX" />

<unset name="HXCPP_JS_PRIME" if="static_link" />
<set name="STAT" value="-stat" if="static_link" />
<set name="PRIME" value=""  />
<set name="PRIME" value="-p" if="HXCPP_JS_PRIME" />


<set name="OBJDBG" value="-debug" if="debug" />
<set name="OBJOPT" value="-fast" if="HXCPP_FAST_LINK" />
<set name="HXCPP_OPTIMIZE_LINK_INCREMENTAL" value="1" if="HXCPP_FAST_LINK HXCPP_OPTIMIZE_LINK" unless="debug" />
<set name="OBJOPT" value="-opt" if="HXCPP_OPTIMIZE_LINK" unless="debug" />
<set name="OBJOPT" value="-optinc" if="HXCPP_OPTIMIZE_LINK_INCREMENTAL" unless="debug" />
<set name="OBJEXT" value="${M64}${F32}${STAT}${OBJDBG}${OBJOPT}${NOCONSOLE}${RPI}${APIFP}${PRIME}" />

<set name="STD_MODULE_LINK" value="static_link" if="static_link"/>
<set name="STD_MODULE_LINK" value="exe" if="HXCPP_JS_PRIME"/>


<section if="iphonesim||iphoneos||appletvsim||appletvos||watchsimulator||watchos">
   <set name="DEVICEEXTRA" value=".iphonesim" if="iphonesim" />
   <set name="DEVICEEXTRA" value=".iphoneos" if="iphoneos" />
   <set name="DEVICEEXTRA" value=".appletvsim" if="appletvsim" />
   <set name="DEVICEEXTRA" value=".appletvos" if="appletvos" />
   <set name="DEVICEEXTRA" value=".watchsimulator" if="watchsimulator" />
   <set name="DEVICEEXTRA" value=".watchos" if="watchos" />
   <set name="LIBEXTRA" value="${DEVICEEXTRA}-x86" if="HXCPP_X86" />
   <set name="LIBEXTRA" value="${DEVICEEXTRA}-x86_64" if="HXCPP_X86_64" />
   <set name="LIBEXTRA" value="${DEVICEEXTRA}-armv6" if="HXCPP_ARMV6" />
   <set name="LIBEXTRA" value="${DEVICEEXTRA}-armv7" if="HXCPP_ARMV7" />
   <set name="LIBEXTRA" value="${DEVICEEXTRA}-armv7s" if="HXCPP_ARMV7S" />
   <set name="LIBEXTRA" value="${DEVICEEXTRA}-arm64" if="HXCPP_ARM64" />
   <unset name="DEVICEEXTRA" />
</section>
<section unless="LIBEXTRA">
   <set name="LIBEXTRA" value="-x86" if="blackberry"/>
   <set name="LIBEXTRA" value="" if="blackberry" unless="simulator" />
   <set name="LIBEXTRA" value="-x86" if="HXCPP_X86" />
   <set name="LIBEXTRA" value="-x86_64" if="HXCPP_X86_64" />
   <set name="LIBEXTRA" value="-v7" if="HXCPP_ARMV7" unless="LIBEXTRA||linux" />
   <set name="LIBEXTRA" value="-64" if="HXCPP_ARM64" unless="LIBEXTRA||linux||isMsvc||macos" />
   <set name="LIBEXTRA" value="-x86" if="tizen"/>
   <set name="LIBEXTRA" value="" if="tizen" unless="simulator" />
</section>
<set name="LIBEXT" value=".a" />
<set name="LIBEXT" value=".lib" if="windows" unless="mingw" />



<set name="haxelink" value="exe" unless="static_link"/>
<set name="haxelink" value="static_link" if="static_link"/>
<set name="haxelink" value="dll" if="android" unless="static_link" />
<set name="haxelink" value="exe" if="exe_link"/>
<set name="haxelink" value="dll" if="dll_import"/>
<set name="haxelink" value="dll" if="dll_link"/>

<set name="DESTDIR" value="bin" />
<set name="DESTDIR" value="lib" if="static_link" unless="HXCPP_IOS_STDCPP"/>
<set name="NDLLDIR" value="ndll" />
<set name="NDLLDIR" value="lib" if="static_link" />


<!-- <set name="IPHONE_VER" value="4.2" unless="IPHONE_VER" /> -->

<set name="HXCPP_DEBUG_LINK" value="1" if="debug" unless="HXCPP_NO_DEBUG_LINK" />
<set name="HXCPP_DEBUG_LINK" value="1" if="HXCPP_DEBUG_LINK_AND_STRIP" />

<set name="HX_LINK_SUFFIX" value="${LIBEXTRA}" />
<set name="HX_TARGET_SUFFIX" value="${LIBEXTRA}" />
<set name="HX_TARGET_PREFIX" value="${LIBPREFIX}" />

<section if="isMsvc">
   <setup name="msvc"/>

   <section if="static_link" >
      <set name="MSVC_LIB_VERSION" value="-${MSVC_VER}" />
   </section>

   <set name="LIBEXTRA" value="-19" if="MSVC19" />
   <set name="LIBEXTRA" value="-arm64" if="HXCPP_ARM64" />
   <set name="HXCPP_M64" value="1" if="HXCPP_ARM64" />
   <set name="HX_LINK_SUFFIX" value="-19" if="MSVC19" />
   <set name="HX_TARGET_SUFFIX" value="-19" if="MSVC19 static_link" />

   <section if="HXCPP_OPTIMIZE_LINK_INCREMENTAL" unless="debug || MSVC19">
      <echo value="Warning: INCREMENTAL requies Visual Studio 2015+"/>
      <!-- without INCREMENTAL -->
      <unset name="HXCPP_OPTIMIZE_LINK_INCREMENTAL"/>
      <set name="HXCPP_OPTIMIZE_LINK" value="1"/> 
      <set name="OBJOPT" value="-opt" if="HXCPP_OPTIMIZE_LINK || HXCPP_OPTIMIZE_LINK_INCREMENTAL" unless="debug" />
      <set name="OBJEXT" value="${M64}${F32}${STAT}${OBJDBG}${OBJOPT}${NOCONSOLE}${RPI}${APIFP}${PRIME}" />
   </section>
</section>
</xml>
